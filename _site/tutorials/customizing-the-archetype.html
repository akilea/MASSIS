<!DOCTYPE html>
<html lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      Creating a MASSIS Application. Customizing the archetype &middot; MASSIS
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="/tests_pages/public/css/poole.css">
  <link rel="stylesheet" href="/tests_pages/public/css/syntax.css">
  <link rel="stylesheet" href="/tests_pages/public/css/hyde.css">
  <link rel="stylesheet" href="/tests_pages/public/css/massis.css">
  <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface">

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/tests_pages/public/apple-touch-icon-144-precomposed.png">
                                 <link rel="shortcut icon" href="/tests_pages/public/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">
</head>


  <body class="theme-base-massis">

    <div class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      <h1>
        <a href="/tests_pages/"><img src="http://i.imgur.com/SyxoguR.png" alt="MASSIS"></a>
      </h1>
      <p class="lead">MultiAgent System Simulation Framework for Indoor Scenarios</p>
    </div>

    <nav class="sidebar-nav">
      

      

      
      
        <a class="sidebar-nav-item" href="/tests_pages/">Home </a>
      
        <a class="sidebar-nav-item" href="/tests_pages/tutorials/">Tutorials </a>
      
        <a class="sidebar-nav-item" href="/tests_pages/blog/index.html">Blog </a>
      

      <a class="sidebar-nav-item" href="https://github.com/rpax/MASSIS/archive/v1.2.10.zip">Download</a>
      <a class="sidebar-nav-item" href="https://github.com/rpax/MASSIS">GitHub project</a>
      <span class="sidebar-nav-item">Currently v1.2.10</span>
    </nav>

    <p>&copy; 2016. All rights reserved.</p>
  </div>
</div>


    <div class="content container">
      <div class="post">
  <h1 class="post-title">Creating a MASSIS Application. Customizing the archetype</h1>
  <p>This is the continuation of the <a href="/tests_pages//tutorials/sample-massis-application">First tutorial</a>, which explains how to create a MASSIS project based on an archetype.</p>

<h2 id="remembering-things-what-is-in-the-project">Remembering things: What is in the project?</h2>

<ul>
<li><code>EnvironmentEditor.java</code> : Contains the necessary code for launching the environment editor.</li>
<li><code>SimulationWithUILauncher.java</code> : This class is responsible for launching the simulator</li>
<li><code>MyHelloHighLevelController</code> : A behavior definion sample.</li>
</ul>

<h2 id="configuring-the-environment">Configuring the environment.</h2>

<p>MASSIS simulator uses sweethome3d as environment definition. The behavior of the elements should be specified in the building file, and implemented as a class.</p>

<p><img src="http://i.imgur.com/z3aw4bl.png" alt=""></p>

<h3 id="opening-the-editor-and-loading-a-default-building">Opening the editor and loading a default building</h3>

<p>Running the <code>EnvironmentEditor</code> class (Run As...-&gt; Java Application) should open SweetHome3D&#39;s editor with some of the MASSIS&#39; plugins.</p>

<p><img src="http://i.imgur.com/pW8lgjG.png" alt=""></p>
<div class="highlight"><pre><code class="language-text" data-lang="text">3D [dev] 1.6.0-scijava-1-pre11-daily-experimental daily

loading class com.massisframework.sweethome3d.plugins.BuildingMetadataPlugin
loading class com.massisframework.testdata.TestDataPlugin
</code></pre></div>
<p>This is the main window of the SweetHome3D editor. During the tutorials, some of the most important features of MASSIS and Sweethome3D editor will be explained. For loading a sample building, click on <em>Help -&gt; Load Sample Home...</em>.</p>

<p><img src="http://i.imgur.com/l9umHvv.png" alt=""></p>

<p>In the popup, select &quot;basichouse.sh3d&quot;.</p>

<p><img src="http://i.imgur.com/7AnSp7i.png" alt=""></p>

<p>A new home will be opened. This basic home contains a basic agent, four walls and a room.</p>

<p><img src="http://i.imgur.com/mqORvHr.png" alt=""></p>

<h3 id="referencing-the-behavior-of-the-agent">Referencing the behavior of the agent.</h3>

<p>Every element in the SweetHome3D editor (with massis plugins) has metadata attached.
For modifing the metadata of an element, the element <strong>should be selected first</strong> and clicking on <em>Tools -&gt; Add Metadata</em>.</p>

<p><img src="http://i.imgur.com/mQZIAAp.png" alt=""></p>

<p>Let&#39;s see what kind of metadata attached has the agent in the room.</p>

<p><img src="http://i.imgur.com/UF4NV2m.png" alt=""></p>

<ul>
<li><code>IS_OBSTACLE</code> : Tells if this element is an obstacle or not. <strong>This topic will be covered later</strong>.</li>
<li><code>ID</code> : The unique id of the element in the building. <strong>It is not recomended to change the value</strong></li>
<li><code>IS_DYNAMIC</code> : If the element is going to move during the simulation. Acts as a hint for the pathfinder and the visualization toolkit. <strong>This topic will be covered later</strong>.</li>
<li><code>CLASSNAME</code> : The reference to the class implementing the agent behavior. By default, its value is <code>com.massisframework.testdata.ai.HelloHighLevelController</code>. We want to change this to our custom implementation. So, the value, in this case should be
<code>
tutorialfollower.myfirstmassisproject.MyHelloHighLevelController
</code>
### Saving the sample home in another location.</li>
</ul>

<p>Maybe you have noticed that the name of the home is kind of strange. Something like <em>MASSIS_278234761.sh3d</em>. This name is like this because the location of this home is <strong>temporary</strong>. In order to preserve the changes, must be saved in a <strong>non temporary</strong> location.</p>

<p>Let&#39;s save the home in the project root folder for making easier the access from the simulator, in this tutorial.
Cliking <em>Save As...</em> -&gt; Tutorial1.sh3d on the project&#39;s root folder.</p>

<p><img src="http://i.imgur.com/775jxVI.png" alt=""></p>

<blockquote>
<p>Note: remember to refresh the eclipse project, in order to see if the file it is actually there.</p>
</blockquote>

<h2 id="running-the-simulation">Running the simulation</h2>

<p>Once saved, let&#39;s run our first simulation. First, we need to change the path of the building file.
In <code>SimulationWithUILauncher</code>, change</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">buildingFilePath = SampleHomesLoader.loadHomeTempFile(&quot;basichouse&quot;).getAbsolutePath();
</code></pre></div>
<p>with</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">buildingFilePath = &quot;Tutorial1.sh3d&quot;;
</code></pre></div>
<p>And remove the try-catch, it is not necessary anymore.</p>

<p>It should appear the MASSIS default gui,</p>

<p><img src="http://i.imgur.com/kPN5EI7.png" alt=""></p>

<p>and some console logs</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">current-max-id: 17
Creating level NONAME
======================================================
Creating floor from level [NONAME]
Initializing simulation objects..
# of SimulationObjects: 1
# of rooms: 1
======================================================
Before/After Reduction : 4/2,[22=&gt;16] took 6 ms
</code></pre></div>
<p>What&#39;s next? <a href="/tests_pages//tutorials/defining-a-simple-behavior">Creating a MASSIS Application. Part 3: Defining a simple behavior</a></p>

</div>

<!--<div class="pagination">
  
    <span class="pagination-item newer">Previous</span>
  

  
    <span class="pagination-item older">Next</span>
  
</div>-->

    </div>

  </body>
</html>
